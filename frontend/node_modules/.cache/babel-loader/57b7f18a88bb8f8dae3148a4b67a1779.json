{"ast":null,"code":"import axios from 'axios';\n\nclass Team {\n  constructor() {\n    this.teams = null;\n  }\n\n  async update() {\n    let query = await axios({\n      url: \"http://140.112.174.222:1484/wind/fetch\",\n      method: \"post\",\n      data: {\n        mes: \"123\"\n      }\n    });\n    let data = query.data.result;\n    data.sort((A, B) => A.score < B.score ? 1 : A.score > B.score ? -1 : 0);\n    let teams = new Array(data.length).fill({});\n    let curRank = 1;\n\n    for (let i = 0; i < data.length; i++) {\n      if (i > 0 && data[i].score != data[i - 1].score) {\n        curRank++;\n      }\n\n      teams[data[i].ID] = {\n        \"rank\": curRank,\n        \"ID\": data[i].ID,\n        \"name\": data[i].name,\n        \"score\": data[i].score,\n        \"history\": data[i].history,\n        \"changed\": !this.teams || this.teams[data[i].ID].score != data[i].score\n      };\n    }\n\n    this.teams = teams;\n    let res = [...teams];\n    res.sort((A, B) => A.rank > B.rank ? 1 : A.rank < B.rank ? -1 : 0);\n    console.log(res);\n    return res;\n  }\n\n}\n\nexport default new Team();","map":{"version":3,"sources":["/home/makerspace/mks_users_home/wind/22-wind/frontend/src/data/teams.js"],"names":["axios","Team","constructor","teams","update","query","url","method","data","mes","result","sort","A","B","score","Array","length","fill","curRank","i","ID","name","history","res","rank","console","log"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;;AAGA,MAAMC,IAAN,CAAW;AAEPC,EAAAA,WAAW,GAAG;AACV,SAAKC,KAAL,GAAa,IAAb;AACH;;AAEW,QAANC,MAAM,GAAG;AACX,QAAIC,KAAK,GAAG,MAAML,KAAK,CAAC;AACpBM,MAAAA,GAAG,EAAE,wCADe;AAEpBC,MAAAA,MAAM,EAAE,MAFY;AAGpBC,MAAAA,IAAI,EAAE;AACFC,QAAAA,GAAG,EAAE;AADH;AAHc,KAAD,CAAvB;AAOA,QAAID,IAAI,GAAGH,KAAK,CAACG,IAAN,CAAWE,MAAtB;AACAF,IAAAA,IAAI,CAACG,IAAL,CAAU,CAACC,CAAD,EAAIC,CAAJ,KAAWD,CAAC,CAACE,KAAF,GAAUD,CAAC,CAACC,KAAb,GAAsB,CAAtB,GAA4BF,CAAC,CAACE,KAAF,GAAUD,CAAC,CAACC,KAAb,GAAsB,CAAC,CAAvB,GAA2B,CAA1E;AAEA,QAAIX,KAAK,GAAG,IAAIY,KAAJ,CAAUP,IAAI,CAACQ,MAAf,EAAuBC,IAAvB,CAA4B,EAA5B,CAAZ;AAEA,QAAIC,OAAO,GAAG,CAAd;;AACA,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGX,IAAI,CAACQ,MAAzB,EAAiCG,CAAC,EAAlC,EAAsC;AAClC,UAAIA,CAAC,GAAG,CAAJ,IAASX,IAAI,CAACW,CAAD,CAAJ,CAAQL,KAAR,IAAiBN,IAAI,CAACW,CAAC,GAAG,CAAL,CAAJ,CAAYL,KAA1C,EAAgD;AAC5CI,QAAAA,OAAO;AACV;;AACDf,MAAAA,KAAK,CAACK,IAAI,CAACW,CAAD,CAAJ,CAAQC,EAAT,CAAL,GAAoB;AAChB,gBAAQF,OADQ;AAEhB,cAAMV,IAAI,CAACW,CAAD,CAAJ,CAAQC,EAFE;AAGhB,gBAAQZ,IAAI,CAACW,CAAD,CAAJ,CAAQE,IAHA;AAIhB,iBAASb,IAAI,CAACW,CAAD,CAAJ,CAAQL,KAJD;AAKhB,mBAAWN,IAAI,CAACW,CAAD,CAAJ,CAAQG,OALH;AAMhB,mBAAY,CAAC,KAAKnB,KAAN,IAAe,KAAKA,KAAL,CAAWK,IAAI,CAACW,CAAD,CAAJ,CAAQC,EAAnB,EAAuBN,KAAvB,IAAgCN,IAAI,CAACW,CAAD,CAAJ,CAAQL;AANnD,OAApB;AAQH;;AAED,SAAKX,KAAL,GAAaA,KAAb;AACA,QAAIoB,GAAG,GAAG,CAAC,GAAGpB,KAAJ,CAAV;AACAoB,IAAAA,GAAG,CAACZ,IAAJ,CAAS,CAACC,CAAD,EAAIC,CAAJ,KAAWD,CAAC,CAACY,IAAF,GAASX,CAAC,CAACW,IAAZ,GAAoB,CAApB,GAA0BZ,CAAC,CAACY,IAAF,GAASX,CAAC,CAACW,IAAZ,GAAoB,CAAC,CAArB,GAAyB,CAArE;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYH,GAAZ;AAEA,WAAOA,GAAP;AACH;;AAxCM;;AA2CX,eAAe,IAAItB,IAAJ,EAAf","sourcesContent":["import axios from 'axios';\n\n\nclass Team {\n\n    constructor() {\n        this.teams = null;\n    }\n\n    async update() {\n        let query = await axios({\n            url: \"http://140.112.174.222:1484/wind/fetch\", \n            method: \"post\", \n            data: {\n                mes: \"123\", \n            }, \n        });\n        let data = query.data.result;\n        data.sort((A, B) => (A.score < B.score) ? 1 : ((A.score > B.score) ? -1 : 0));\n\n        let teams = new Array(data.length).fill({});\n\n        let curRank = 1;\n        for (let i = 0; i < data.length; i++) {\n            if (i > 0 && data[i].score != data[i - 1].score){\n                curRank++;\n            }\n            teams[data[i].ID] = {\n                \"rank\": curRank, \n                \"ID\": data[i].ID, \n                \"name\": data[i].name, \n                \"score\": data[i].score, \n                \"history\": data[i].history, \n                \"changed\": (!this.teams || this.teams[data[i].ID].score != data[i].score), \n            };\n        }\n\n        this.teams = teams;\n        let res = [...teams];\n        res.sort((A, B) => (A.rank > B.rank) ? 1 : ((A.rank < B.rank) ? -1 : 0));\n        console.log(res);\n\n        return res;\n    }\n}\n\nexport default new Team;"]},"metadata":{},"sourceType":"module"}