{"ast":null,"code":"import axios from 'axios';\n\nclass Team {\n  constructor() {\n    this.teams = null;\n  }\n\n  async update() {\n    let query = await axios({\n      url: \"http://140.112.174.222:9487/wind/fetch\",\n      method: \"post\",\n      data: {}\n    });\n    let data = query.data.result;\n    data.sort((A, B) => A.score < B.score ? 1 : A.score > B.score ? -1 : 0);\n    let teams = new Array(data.length).fill({});\n    let curRank = 1;\n    let changed = false;\n\n    for (let i = 0; i < data.length; i++) {\n      if (i > 0 && data[i].score != data[i - 1].score) {\n        curRank++;\n      }\n\n      teams[data[i].ID] = {\n        \"rank\": curRank,\n        \"ID\": data[i].ID,\n        \"name\": data[i].name,\n        \"score\": data[i].score,\n        \"history\": data[i].history,\n        \"changed\": !this.teams || this.teams[data[i].ID].score != data[i].score\n      };\n      changed = changed || teams[data[i].ID].changed;\n    }\n\n    this.teams = teams;\n    let res = [...teams];\n    res.sort((A, B) => A.rank > B.rank ? 1 : A.rank < B.rank ? -1 : 0);\n    return res;\n  }\n\n}\n\nexport default new Team();","map":{"version":3,"sources":["/home/makerspace/mks_users_home/wind/22-wind/frontend/src/data/teams.js"],"names":["axios","Team","constructor","teams","update","query","url","method","data","result","sort","A","B","score","Array","length","fill","curRank","changed","i","ID","name","history","res","rank"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;;AAGA,MAAMC,IAAN,CAAW;AAEPC,EAAAA,WAAW,GAAG;AACV,SAAKC,KAAL,GAAa,IAAb;AACH;;AAEW,QAANC,MAAM,GAAG;AACX,QAAIC,KAAK,GAAG,MAAML,KAAK,CAAC;AACpBM,MAAAA,GAAG,EAAE,wCADe;AAEpBC,MAAAA,MAAM,EAAE,MAFY;AAGpBC,MAAAA,IAAI,EAAE;AAHc,KAAD,CAAvB;AAKA,QAAIA,IAAI,GAAGH,KAAK,CAACG,IAAN,CAAWC,MAAtB;AACAD,IAAAA,IAAI,CAACE,IAAL,CAAU,CAACC,CAAD,EAAIC,CAAJ,KAAWD,CAAC,CAACE,KAAF,GAAUD,CAAC,CAACC,KAAb,GAAsB,CAAtB,GAA4BF,CAAC,CAACE,KAAF,GAAUD,CAAC,CAACC,KAAb,GAAsB,CAAC,CAAvB,GAA2B,CAA1E;AAEA,QAAIV,KAAK,GAAG,IAAIW,KAAJ,CAAUN,IAAI,CAACO,MAAf,EAAuBC,IAAvB,CAA4B,EAA5B,CAAZ;AAEA,QAAIC,OAAO,GAAG,CAAd;AACA,QAAIC,OAAO,GAAG,KAAd;;AACA,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGX,IAAI,CAACO,MAAzB,EAAiCI,CAAC,EAAlC,EAAsC;AAClC,UAAIA,CAAC,GAAG,CAAJ,IAASX,IAAI,CAACW,CAAD,CAAJ,CAAQN,KAAR,IAAiBL,IAAI,CAACW,CAAC,GAAG,CAAL,CAAJ,CAAYN,KAA1C,EAAgD;AAC5CI,QAAAA,OAAO;AACV;;AACDd,MAAAA,KAAK,CAACK,IAAI,CAACW,CAAD,CAAJ,CAAQC,EAAT,CAAL,GAAoB;AAChB,gBAAQH,OADQ;AAEhB,cAAMT,IAAI,CAACW,CAAD,CAAJ,CAAQC,EAFE;AAGhB,gBAAQZ,IAAI,CAACW,CAAD,CAAJ,CAAQE,IAHA;AAIhB,iBAASb,IAAI,CAACW,CAAD,CAAJ,CAAQN,KAJD;AAKhB,mBAAWL,IAAI,CAACW,CAAD,CAAJ,CAAQG,OALH;AAMhB,mBAAY,CAAC,KAAKnB,KAAN,IAAe,KAAKA,KAAL,CAAWK,IAAI,CAACW,CAAD,CAAJ,CAAQC,EAAnB,EAAuBP,KAAvB,IAAgCL,IAAI,CAACW,CAAD,CAAJ,CAAQN;AANnD,OAApB;AASAK,MAAAA,OAAO,GAAGA,OAAO,IAAIf,KAAK,CAACK,IAAI,CAACW,CAAD,CAAJ,CAAQC,EAAT,CAAL,CAAkBF,OAAvC;AACH;;AAED,SAAKf,KAAL,GAAaA,KAAb;AACA,QAAIoB,GAAG,GAAG,CAAC,GAAGpB,KAAJ,CAAV;AACAoB,IAAAA,GAAG,CAACb,IAAJ,CAAS,CAACC,CAAD,EAAIC,CAAJ,KAAWD,CAAC,CAACa,IAAF,GAASZ,CAAC,CAACY,IAAZ,GAAoB,CAApB,GAA0Bb,CAAC,CAACa,IAAF,GAASZ,CAAC,CAACY,IAAZ,GAAoB,CAAC,CAArB,GAAyB,CAArE;AAEA,WAAOD,GAAP;AACH;;AAxCM;;AA2CX,eAAe,IAAItB,IAAJ,EAAf","sourcesContent":["import axios from 'axios';\n\n\nclass Team {\n\n    constructor() {\n        this.teams = null;\n    }\n\n    async update() {\n        let query = await axios({\n            url: \"http://140.112.174.222:9487/wind/fetch\", \n            method: \"post\", \n            data: {}, \n        });\n        let data = query.data.result;\n        data.sort((A, B) => (A.score < B.score) ? 1 : ((A.score > B.score) ? -1 : 0));\n\n        let teams = new Array(data.length).fill({});\n\n        let curRank = 1;\n        let changed = false;\n        for (let i = 0; i < data.length; i++) {\n            if (i > 0 && data[i].score != data[i - 1].score){\n                curRank++;\n            }\n            teams[data[i].ID] = {\n                \"rank\": curRank, \n                \"ID\": data[i].ID, \n                \"name\": data[i].name, \n                \"score\": data[i].score, \n                \"history\": data[i].history, \n                \"changed\": (!this.teams || this.teams[data[i].ID].score != data[i].score), \n            };\n\n            changed = changed || teams[data[i].ID].changed;\n        }\n\n        this.teams = teams;\n        let res = [...teams];\n        res.sort((A, B) => (A.rank > B.rank) ? 1 : ((A.rank < B.rank) ? -1 : 0));\n\n        return res;\n    }\n}\n\nexport default new Team;"]},"metadata":{},"sourceType":"module"}